<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Download</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root { --bg: #050505; --card: #121212; --primary: #6C63FF; --text: #fff; }
        body { background: var(--bg); color: var(--text); font-family: sans-serif; display: flex; flex-direction: column; align-items: center; user-select: none; }
        .main-container { width: 100%; max-width: 500px; padding: 20px; text-align: center; }
        .link-card { background: #1e1e1e; padding: 15px; margin-bottom: 10px; border-radius: 12px; display: flex; align-items: center; gap: 15px; cursor: pointer; border: 1px solid #333; }
        .link-card:hover { border-color: var(--primary); transform: translateY(-2px); }
        .link-card.best { border-color: #2ecc71; background: rgba(46, 204, 113, 0.1); }
        .server-name { font-weight: bold; }
        .spinner { width: 40px; height: 40px; border: 3px solid #333; border-top: 3px solid var(--primary); border-radius: 50%; animation: spin 1s infinite; margin: 20px auto; }
        @keyframes spin { 100% { transform: rotate(360deg); } }
    </style>
</head>
<body oncontextmenu="return false;">
    <div class="main-container">
        <h1>Download Links</h1>
        <div id="status">Processing...</div>
        <div id="spinner" class="spinner"></div>
        <div id="links"></div>
    </div>
    <script>
        const API = "https://nothing-to-see-nine.vercel.app";
        const KEY = "sadabefy";
        const url = new URLSearchParams(window.location.search).get('url');

        function openLink(link) { window.open(link, '_blank'); }

        async function init() {
            if(!url) return document.getElementById('status').innerText = "No URL provided";
            
            let endpoint = 'hubcloud';
            if(url.includes('mobilejsr') || url.includes('nexdrive')) endpoint = 'nexdrive';
            else if(url.includes('gdflix')) endpoint = 'gdflix';

            if(endpoint === 'nexdrive') document.getElementById('status').innerText = "Unlocking (Wait 10s)...";

            try {
                const res = await fetch(`${API}/${endpoint}?url=${encodeURIComponent(url)}&key=${KEY}`);
                const data = await res.json();
                
                document.getElementById('spinner').style.display = 'none';
                
                if(data.streams && data.streams.length > 0) {
                    document.getElementById('status').innerText = data.title || "Ready";
                    const container = document.getElementById('links');
                    
                    data.streams.forEach((s, i) => {
                        const isBest = s.server.includes('10Gbps') || s.server.includes('G-Direct');
                        container.innerHTML += `
                        <div class="link-card ${isBest ? 'best' : ''}" onclick="openLink('${s.link}')">
                            <i class="fas fa-download"></i>
                            <div style="flex:1; text-align:left;">
                                <div class="server-name">${s.server}</div>
                                <div style="font-size:12px; color:#888;">${s.type.toUpperCase()}</div>
                            </div>
                            <i class="fas fa-chevron-right"></i>
                        </div>`;
                    });
                } else {
                    document.getElementById('status').innerText = "No links found";
                }
            } catch(e) {
                document.getElementById('status').innerText = "Error";
                document.getElementById('spinner').style.display = 'none';
            }
        }
        init();
    </script>
</body>
</html>
